---
import { Image } from 'astro:assets';
import logoHeader from '../assets/images/rock-logo-header.png';
---

<header id="main-header" class="fixed top-0 left-0 w-full z-50 bg-white transition-all duration-300">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
    
    <!-- Logo optimizado -->
    <a href="/" class="flex items-center">
      <Image
        src={logoHeader}
        alt="Logo institucional Rock Hosting Plus"
        width={160}
        height={48}
        class="h-10 w-auto md:h-12"
        loading="eager"
      />
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center justify-end space-x-6">
      <!-- Inicio -->
      <a href="/" class="text-gray-900 hover:text-orange-600 font-medium transition duration-200 hover:underline underline-offset-4">Inicio</a>

      <!-- Hosting con submenú -->
      <div class="relative group">
        <button class="text-gray-900 hover:text-orange-600 font-medium transition duration-200 hover:underline underline-offset-4">
          Hosting
        </button>
        <div class="absolute left-0 mt-2 w-48 bg-white shadow-lg rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50">
          <ul class="py-2">
            <li><a href="/hosting/web-hosting" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Web Hosting</a></li>
            <li><a href="/hosting/reseller-hosting" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Reseller Hosting</a></li>
            <li><a href="/hosting/wordpress-hosting" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">WordPress Hosting</a></li>
          </ul>
        </div>
      </div>

      <!-- Dominios con submenú -->
      <div class="relative group">
        <button class="text-gray-900 hover:text-orange-600 font-medium transition duration-200 hover:underline underline-offset-4">
          Dominios
        </button>
        <div class="absolute left-0 mt-2 w-40 bg-white shadow-lg rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50">
          <ul class="py-2">
            <li><a href="https://tudominio.com/whmcs/cart.php?a=add&domain=register" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Contratar</a></li>
            <li><a href="https://tudominio.com/whmcs/cart.php?a=add&domain=transfer" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Transferir</a></li>
          </ul>
        </div>
      </div>

      <!-- Contacto con submenú -->
      <div class="relative group">
        <button class="text-gray-900 hover:text-orange-600 font-medium transition duration-200 hover:underline underline-offset-4">
          Contacto
        </button>
        <div class="absolute left-0 mt-2 w-56 bg-white shadow-lg rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50">
          <ul class="py-2">
            <li><a href="/contacto/quienes-somos" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Quiénes somos</a></li>
            <li><a href="/contacto/sitios-web" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Diseño de páginas web</a></li>
            <li><a href="/contacto/contacto" class="block px-4 py-2 text-sm text-gray-800 hover:bg-gray-100">Contacto</a></li>
          </ul>
        </div>
      </div>

      <!-- Blog comentado -->
      <a href="/blog" class="text-gray-900 hover:text-orange-600 font-medium transition duration-200 hover:underline underline-offset-4">Soporte</a>

      <!-- Login -->
      <a href="#" class="bg-orange-500 text-white font-semibold h-10 px-4 rounded hover:bg-orange-600 transition duration-200 flex items-center">
        Login
      </a>
    </nav>

    <!-- Mobile Menu Button -->
    <button id="menu-toggle" class="md:hidden text-orange-600 focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Mobile Nav -->
  <div id="mobile-menu" class="hidden md:hidden bg-white/90 border-t border-orange-300 px-4 pb-4">
    <!-- Hosting expandido en mobile -->
    <div class="py-2">
      <span class="block text-gray-700 font-medium mb-1">Hosting</span>
      <a href="/hosting/web-hosting" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Web Hosting</a>
      <a href="/hosting/reseller-hosting" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Reseller Hosting</a>
      <a href="/hosting/wordpress-hosting" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">WordPress Hosting</a>
    </div>

    <!-- Dominios expandido en mobile -->
    <div class="py-2">
      <span class="block text-gray-700 font-medium mb-1">Dominios</span>
      <a href="https://tudominio.com/whmcs/cart.php?a=add&domain=register" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Contratar</a>
      <a href="https://tudominio.com/whmcs/cart.php?a=add&domain=transfer" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Transferir</a>
    </div>

    <!-- Contacto expandido en mobile -->
    <div class="py-2">
      <span class="block text-gray-700 font-medium mb-1">Contacto</span>
      <a href="/contacto/quienes-somos" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Quiénes somos</a>
      <a href="/contacto/sitios-web" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Diseño de páginas web</a>
      <a href="/contacto/contacto" class="block pl-4 py-1 text-gray-700 hover:text-orange-600 text-sm">Contacto</a>
    </div>

    <!-- Blog comentado -->
    <a href="/blog" class="block py-2 text-gray-700 hover:text-orange-600 font-medium transition duration-200">Soporte</a>

    <a href="#" class="block py-2 text-white bg-orange-500 rounded text-center font-medium hover:bg-orange-600 transition duration-200">
      Login
    </a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.getElementById('menu-toggle');
      const menu = document.getElementById('mobile-menu');
      const header = document.getElementById('main-header');

      if (toggle && menu) {
        toggle.addEventListener('click', () => {
          menu.classList.toggle('hidden');
        });
      }

      if (header) {
        const onScroll = () => {
          if (window.scrollY > 10) {
            header.classList.add('bg-white/80', 'backdrop-blur-md', 'shadow-md');
          } else {
            header.classList.remove('bg-white/80', 'backdrop-blur-md', 'shadow-md');
          }
        };

        window.addEventListener('scroll', onScroll);
        onScroll(); // Ejecuta al cargar
      }
    });
  </script>
</header>